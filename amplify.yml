version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "Installing dependencies..."
        - echo "No specific dependencies needed for static site"
    build:
      commands:
        - echo "Build started..."
        - echo "Copying static assets to build directory..."
        - mkdir -p public/static
        - cp -R app/static/* public/static/
        - echo "Creating redirect from root to main page..."
        - echo '<!DOCTYPE html>
          <html lang="en">
          <head>
              <meta charset="UTF-8">
              <meta http-equiv="refresh" content="0;url=/static/html/index.html">
              <title>Redirecting to Portfolio</title>
          </head>
          <body>
              <p>Redirecting to <a href="/static/html/index.html">Portfolio Homepage</a>...</p>
          </body>
          </html>' > public/index.html
  artifacts:
    baseDirectory: public
    files:
      - '**/*'
  cache:
    paths: []
  customHeaders:
    - pattern: '**/*'
      headers:
        - key: 'Cache-Control'
          value: 'public, max-age=0, must-revalidate'
        - key: 'X-Frame-Options'
          value: 'SAMEORIGIN'
    
api_redirects:
  - source_path: /api/site-config
    target_url: https://zelbc2vwg2.execute-api.eu-north-1.amazonaws.com/Staging/website-portfolio?type=site_config
    status: '200'
  - source_path: /api/get-site-config
    target_url: https://zelbc2vwg2.execute-api.eu-north-1.amazonaws.com/Staging?type=site_config
    status: '200'
  - source_path: /api/get-content
    target_url: https://zelbc2vwg2.execute-api.eu-north-1.amazonaws.com/Staging?type=content
    status: '200'

redirects:
  - source: /
    destination: /static/html/index.html
    status: '302'
  - source: /index.html
    destination: /static/html/index.html
    status: '302'
  - source: /admin
    destination: /admin-direct/
    status: '302'
  - source: /admin/
    destination: /admin-direct/
    status: '302'
  - source: /admin/index.html
    destination: /admin-direct/
    status: '302'
  - source: /projects
    destination: /static/html/projects.html
    status: '200'
  - source: /solutions
    destination: /static/html/solutions.html
    status: '200'
  - source: /contact
    destination: /static/html/contact.html
    status: '200'
